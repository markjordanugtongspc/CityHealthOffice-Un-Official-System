const e="cho-pages-v1";async function r(){if("serviceWorker"in navigator)try{const e=await navigator.serviceWorker.register("/sw.js",{scope:"/"});return e.addEventListener("updatefound",()=>{const r=e.installing;r.addEventListener("statechange",()=>{"installed"===r.state&&navigator.serviceWorker.controller&&console.log("New service worker available")})}),e}catch(e){return console.warn("Service Worker registration failed:",e),null}return null}async function n(r){if("serviceWorker"in navigator&&navigator.serviceWorker.controller)navigator.serviceWorker.controller.postMessage({type:"PRELOAD_PAGE",url:r});else if("caches"in window)try{const n=await fetch(r);if(n.ok){const t=await caches.open(e);await t.put(r,n.clone())}}catch(n){}}async function t(r){if("caches"in window){const n=await caches.open(e);return void 0!==await n.match(r)}return!1}export{t as isPageCached,n as preloadPage,r as registerServiceWorker};
